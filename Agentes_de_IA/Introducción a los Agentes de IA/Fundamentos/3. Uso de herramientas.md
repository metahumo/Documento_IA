
---

# Uso de herramientas por agentes de IA

Los agentes de IA no funcionan solo con su modelo de lenguaje (LLM), sino que pueden interactuar con **herramientas externas** para obtener informaci√≥n, realizar c√°lculos o ejecutar acciones concretas. Esto permite ampliar sus capacidades y mantener coherencia en sistemas complejos.

---

## 1. C√≥mo el modelo decide usar una herramienta

Cuando un agente tiene acceso a varias herramientas programadas, el **LLM interpreta el ‚Äúdescription‚Äù de cada herramienta** para decidir cu√°l usar en un contexto espec√≠fico.

- `name`: identificador interno de la herramienta.
- `description`: explica la funcionalidad y el tipo de tarea que resuelve.
- `parameters`: define los argumentos que la herramienta necesita.
- `required`: indica qu√© par√°metros son obligatorios.

El modelo combina su razonamiento con la informaci√≥n de `description` para elegir la herramienta correcta y rellenar sus par√°metros.

---

## 2. Ejemplo pr√°ctico: obtener el clima en tiempo real

Supongamos que queremos que un agente consulte el clima de cualquier lugar. Primero definimos la herramienta en c√≥digo:

```python
import requests

def obtener_clima(lugar: str) -> str:
    """
    Obtiene el clima actual de un lugar utilizando el servicio wttr.in
    """
    r = requests.get(f"https://wttr.in/{lugar}?format=j1")  # respuesta en JSON
    data = r.json()
    temp = data["current_condition"][0]["temp_C"]
    desc = data["current_condition"][0]["weatherDesc"][0]["value"]
    return f"El clima actual de {lugar} es {desc} con {temp}¬∫C."
````

**C√≥mo el agente lo usar√≠a:**

1. El modelo reconoce la necesidad de consultar el clima.
    
2. Selecciona `obtener_clima` usando la descripci√≥n.
    
3. Pasa el par√°metro `lugar` seg√∫n la consulta.
    
4. Recibe el resultado y genera una respuesta coherente para el usuario.
    

**Ejemplo de salida:**

```
El clima actual de C√°diz (Espa√±a) es nublado con 22¬∫C.
```

---

## 3. Ejemplo enfocado en ciberseguridad

Imaginemos una herramienta para consultar informaci√≥n de un dominio sospechoso:

```python
import requests

def consulta_dominios(name: str, type: str) -> dict:
    """
    Consulta informaci√≥n b√°sica sobre un dominio o IP.
    Parameters:
        name (str): nombre de dominio o IP
        type (str): tipo de consulta ('whois', 'dns', 'geo')
    Returns:
        dict: { "name": ..., "type": ..., "description": ..., "properties": {...} }
    """
    # Ejemplo simplificado
    if type == "whois":
        return {"name": name, "type": type, "description": "Informaci√≥n WHOIS", "properties": {"registrante": "XYZ", "creacion": "2022-01-01"}}
    elif type == "geo":
        return {"name": name, "type": type, "description": "Localizaci√≥n geogr√°fica", "properties": {"pais": "Espa√±a", "ciudad": "Madrid"}}
    else:
        return {"name": name, "type": type, "description": "Consulta gen√©rica", "properties": {}}
```

**C√≥mo interact√∫a el LLM:**

- El modelo reconoce que se requiere informaci√≥n de un dominio o IP.
    
- Selecciona la funci√≥n adecuada seg√∫n la descripci√≥n y el tipo de informaci√≥n que necesita.
    
- Los par√°metros (`name`, `type`) se completan autom√°ticamente.
    
- Recibe la estructura JSON y genera una respuesta coherente, interpretando `properties` y `description`.
    

---

## 4. Importancia del `description` y par√°metros

- La descripci√≥n es **fundamental para que el LLM entienda la utilidad de cada herramienta**.
    
- Los par√°metros permiten al agente **personalizar la llamada** seg√∫n la situaci√≥n.
    
- Sin una descripci√≥n clara, el modelo podr√≠a seleccionar la herramienta incorrecta o no usarla.
    

---

## 5. Integraci√≥n del c√≥digo con servicios externos

Ejemplo completo con clima:

```python
import requests

def obtener_clima(lugar):
    r = requests.get(f"https://wttr.in/{lugar}?format=j1")
    data = r.json()
    temp = data["current_condition"][0]["temp_C"]
    desc = data["current_condition"][0]["weatherDesc"][0]["value"]
    return {"temp": temp, "nublado": "nublado" in desc.lower(), "emoji": "üå•", "descripcion": desc}
```

El agente recibe este diccionario y **decide c√≥mo usarlo** en la respuesta final:

```python
clima = obtener_clima("C√°diz")
respuesta = f"El clima actual de C√°diz (Espa√±a) es {clima['descripcion']} con {clima['temp']}¬∫C."
print(respuesta)
```

---

## 6. MCP (Model Control Points) y sistemas complejos

En sistemas grandes, los agentes que interact√∫an con m√∫ltiples herramientas y servicios pueden **romperse** o perder coherencia:

- Llamadas repetidas a herramientas incorrectas.
    
- Confusi√≥n al interpretar resultados JSON complejos.
    
- Uso ineficiente de recursos externos.
    

**MCP (Model Control Points)** se introducen como puntos de control que:

- Supervisan la interacci√≥n del agente con herramientas.
    
- Validan entradas y salidas.
    
- Optimizan el flujo de decisiones.
    
- Previenen errores de interpretaci√≥n y sobreuso de recursos.
    

Con MCP, el agente puede trabajar de manera m√°s fiable en entornos complejos, mantener consistencia y aprovechar mejor sus herramientas.

---

## 7. Resumen

1. Los LLM no solo generan texto, sino que pueden **interactuar con herramientas externas**.
    
2. La **descripci√≥n de la herramienta** y los **par√°metros** son clave para que el modelo decida correctamente.
    
3. Se pueden usar herramientas para casos pr√°cticos como **consultar el clima** o **informaci√≥n de ciberseguridad**.
    
4. La integraci√≥n con servicios externos devuelve datos estructurados que el modelo interpreta.
    
5. En sistemas grandes y complejos, los **MCP** aseguran consistencia y eficiencia en el uso de herramientas.

---
